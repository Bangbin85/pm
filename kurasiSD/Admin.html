<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Panel Admin Kurasi</title>
    <script src="https://cdn.tailwindcss.com"></script>
	<link rel="icon" type="image/x-icon" href="https://kemendikdasmen.go.id/web/image/website/21/favicon?unique=c3563e4">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <!-- Library untuk membaca file Excel -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        .sidebar-link.active {
            background-color: #4f46e5; /* indigo-600 */
            color: white;
            font-weight: 600;
        }
        .modal-backdrop {
            background-color: rgba(0, 0, 0, 0.5);
        }
        #logBox, #cacheLogBox {
            font-family: 'Courier New', Courier, monospace;
            white-space: pre-wrap;
            height: 300px;
            overflow-y: auto;
            border-radius: 8px;
            padding: 16px;
            background-color: #1E293B; /* slate-800 */
            color: #E2E8F0; /* slate-200 */
        }
        .form-input {
             @apply mt-1 block w-full px-3 py-2 text-base border border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md;
        }
        .login-input {
            @apply w-full px-4 py-3 bg-gray-700/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-all duration-300;
        }
        /* Style untuk tombol paginasi */
        .pagination-btn {
            @apply px-4 py-2 border rounded-md text-sm font-medium transition-colors;
        }
        /* Transisi untuk sidebar */
        #admin-sidebar {
            transition: transform 0.3s ease-in-out;
        }
    </style>
</head>
<body class="bg-slate-900">

    <!-- === LOGIN SCREEN === -->
    <div id="login-screen" class="min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-900 to-gray-800 p-4">
        <div class="w-full max-w-md">
            <form id="login-form" class="bg-slate-800/50 backdrop-blur-xl shadow-2xl rounded-2xl px-8 pt-10 pb-8 mb-4 border border-slate-700">
                 <div class="mb-8 text-center">
                    <h1 class="text-3xl font-bold text-white">Admin Panel Login</h1>
                    <p class="text-slate-400 mt-2">Silakan masuk untuk melanjutkan</p>
                </div>
                <div class="mb-4">
                    <label class="block text-slate-300 text-sm font-bold mb-2" for="username">
                        Username
                    </label>
                    <div class="relative">
                         <span class="absolute inset-y-0 left-0 flex items-center pl-3">
                             <i class="fas fa-user text-gray-400"></i>
                         </span>
                         <input class="login-input pl-10" id="username" type="text" placeholder="Masukkan username admin" required>
                    </div>
                </div>
                <div class="mb-6">
                    <label class="block text-slate-300 text-sm font-bold mb-2" for="password">
                        Password
                    </label>
                    <div class="relative">
                         <span class="absolute inset-y-0 left-0 flex items-center pl-3">
                             <i class="fas fa-lock text-gray-400"></i>
                         </span>
                        <input class="login-input pl-10" id="password" type="password" placeholder="******************" required>
                    </div>
                </div>
                 <p id="login-error" class="text-red-500 text-xs italic mb-4 h-4"></p>
                <div class="flex items-center justify-between">
                    <button class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-4 rounded-lg focus:outline-none focus:shadow-outline transition-all duration-300 disabled:opacity-50" type="submit">
                        Masuk
                    </button>
                </div>
                 <div class="mt-4 text-center">
                    <a href="./" class="text-indigo-400 hover:text-indigo-300 text-sm transition-colors">Kembali ke Home</a>
                </div>
            </form>
            <p class="text-center text-gray-500 text-xs">
                &copy;2024 Kurasi Konten.
            </p>
        </div>
    </div>


    <!-- === ADMIN PANEL (HIDDEN BY DEFAULT) === -->
    <div id="admin-panel" class="hidden">
        <div class="relative min-h-screen md:flex bg-slate-100">
            <!-- Overlay untuk sidebar mobile -->
            <div id="sidebar-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-30 hidden md:hidden"></div>

            <!-- === SIDEBAR === -->
            <aside id="admin-sidebar" class="w-64 bg-slate-800 text-slate-200 flex flex-col fixed inset-y-0 left-0 transform -translate-x-full md:relative md:translate-x-0 z-40">
                <div class="p-6 text-center border-b border-slate-700">
                    <h1 class="text-2xl font-bold text-white">Admin Kurasi</h1>
                </div>
                <nav class="flex-1 p-4 space-y-2">
                    <a href="#" class="sidebar-link flex items-center py-2 px-4 rounded-lg transition-colors hover:bg-slate-700 active" data-target="dashboard">
                        <i class="fas fa-tachometer-alt w-6"></i><span>Dashboard</span>
                    </a>
                    <a href="#" class="sidebar-link flex items-center py-2 px-4 rounded-lg transition-colors hover:bg-slate-700" data-target="users">
                        <i class="fas fa-users-cog w-6"></i><span>Manajemen Pengguna</span>
                    </a>
                    <a href="#" class="sidebar-link flex items-center py-2 px-4 rounded-lg transition-colors hover:bg-slate-700" data-target="content">
                        <i class="fas fa-file-alt w-6"></i><span>Manajemen Konten</span>
                    </a>
                    <a href="#" class="sidebar-link flex items-center py-2 px-4 rounded-lg transition-colors hover:bg-slate-700" data-target="assignments">
                        <i class="fas fa-tasks w-6"></i><span>Penugasan</span>
                    </a>
                    <a href="#" class="sidebar-link flex items-center py-2 px-4 rounded-lg transition-colors hover:bg-slate-700" data-target="hasil">
                        <i class="fas fa-check-square w-6"></i><span>Hasil Kurasi</span>
                    </a>
                    <a href="#" class="sidebar-link flex items-center py-2 px-4 rounded-lg transition-colors hover:bg-slate-700" data-target="settings">
                        <i class="fas fa-cogs w-6"></i><span>Pengaturan</span>
                    </a>
                </nav>
                 <div class="p-4 border-t border-slate-700">
                    <a href="#" id="logout-btn" class="flex items-center py-2 px-4 rounded-lg text-red-400 transition-colors hover:bg-red-500 hover:text-white">
                        <i class="fas fa-sign-out-alt w-6"></i><span>Logout</span>
                    </a>
                </div>
            </aside>

            <!-- === MAIN CONTENT WRAPPER === -->
            <div class="flex-1 flex flex-col">
                <!-- Header Mobile -->
                <header class="md:hidden bg-white shadow-md p-4 flex justify-between items-center sticky top-0 z-20">
                    <button id="sidebar-toggle-btn" class="text-slate-600 focus:outline-none">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                    <h2 class="text-xl font-bold text-slate-800" id="mobile-page-title">Dashboard</h2>
                     <div class="w-6"></div> <!-- Spacer -->
                </header>
                
                <main class="flex-1 p-4 sm:p-8 overflow-y-auto">
                    <!-- Dashboard Page -->
                    <div id="dashboard-page" class="page-content">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-3xl font-bold text-slate-800">Dashboard</h2>
                             <button id="refresh-data-btn" class="bg-slate-600 hover:bg-slate-700 text-white font-bold py-2 px-4 rounded-lg flex items-center">
                                <i class="fas fa-sync-alt mr-2"></i><span>Muat Ulang Data</span>
                            </button>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                            <div class="bg-white p-6 rounded-lg shadow-md flex items-center space-x-4">
                                <i class="fas fa-users text-4xl text-blue-500"></i>
                                <div>
                                    <p class="text-slate-500">Total Pengguna</p>
                                    <p id="total-users" class="text-3xl font-bold">...</p>
                                </div>
                            </div>
                            <div class="bg-white p-6 rounded-lg shadow-md flex items-center space-x-4">
                                <i class="fas fa-file-alt text-4xl text-green-500"></i>
                                <div>
                                    <p class="text-slate-500">Total Konten</p>
                                    <p id="total-content" class="text-3xl font-bold">...</p>
                                </div>
                            </div>
                             <div class="bg-white p-6 rounded-lg shadow-md flex items-center space-x-4">
                                <i class="fas fa-check-double text-4xl text-indigo-500"></i>
                                <div>
                                    <p class="text-slate-500">Total Kurasi</p>
                                    <p id="total-curations" class="text-3xl font-bold">...</p>
                                </div>
                            </div>
                        </div>

                        <!-- NEW: Cache Update Section -->
                        <div class="mt-8 bg-white p-6 rounded-lg shadow-md">
                            <h3 class="text-xl font-bold text-slate-800 mb-3">Pembaruan Cache Dashboard Publik</h3>
                            <p class="text-slate-600 mb-4">
                                Klik tombol di bawah untuk mengambil semua data terbaru, menghitung statistik, dan memperbarui tampilan di halaman utama (`index.html`). 
                                Proses ini akan menggunakan banyak kuota 'read' untuk Anda sebagai admin, tetapi akan membuat halaman utama sangat hemat untuk pengunjung.
                            </p>
                            <button id="update-cache-btn" class="w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg flex items-center justify-center transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed">
                                <i class="fas fa-cloud-upload-alt mr-2"></i>
                                <span>Perbarui Cache Sekarang</span>
                            </button>
                             <div class="mt-4">
                                <h4 class="text-md font-semibold text-slate-700 mb-2">Log Proses Cache:</h4>
                                <div id="cacheLogBox">Menunggu perintah...</div>
                            </div>
                        </div>
                    </div>

                    <!-- Users Page -->
                    <div id="users-page" class="page-content hidden">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-3xl font-bold text-slate-800">Manajemen Pengguna</h2>
                            <button id="add-user-btn" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg"><i class="fas fa-plus mr-2"></i>Tambah Pengguna</button>
                        </div>
                        <div class="mb-4">
                            <input type="search" id="search-user-input" placeholder="Cari nama pengguna..." class="form-input w-full max-w-sm">
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-md overflow-x-auto">
                            <table class="w-full text-left">
                                <thead>
                                    <tr class="border-b">
                                        <th class="py-2 px-4">Nama</th>
                                        <th class="py-2 px-4">Instansi</th>
                                        <th class="py-2 px-4">ID/Username</th>
                                        <th class="py-2 px-4">Role</th>
                                        <th class="py-2 px-4">Aksi</th>
                                    </tr>
                                </thead>
                                <tbody id="users-table-body">
                                    <tr><td colspan="5" class="text-center p-4">Memuat data...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <!-- Content Page -->
                    <div id="content-page" class="page-content hidden">
                         <div class="flex justify-between items-center mb-6">
                            <h2 class="text-3xl font-bold text-slate-800">Manajemen Konten</h2>
                            <div class="flex space-x-2">
                                 <button id="download-template-btn" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-lg flex items-center"><i class="fas fa-download mr-2"></i>Unduh Template</button>
                                 <button id="upload-excel-btn" class="bg-purple-500 hover:bg-purple-600 text-white font-bold py-2 px-4 rounded-lg flex items-center"><i class="fas fa-file-excel mr-2"></i>Upload Excel</button>
                                 <button id="add-content-btn" class="bg-green-500 hover:bg-green-600 text-white font-bold py-2 px-4 rounded-lg flex items-center"><i class="fas fa-plus mr-2"></i>Tambah Konten</button>
                                 <button id="delete-all-content-btn" class="bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-4 rounded-lg flex items-center"><i class="fas fa-trash mr-2"></i>Hapus Semua Konten</button>
                                 <input type="file" id="excel-file-input" class="hidden" accept=".xlsx, .xls">
                            </div>
                        </div>
                        <!-- === PERUBAHAN DI SINI: SEARCH BAR === -->
                        <div class="mb-4">
                            <input type="search" id="search-content-input" placeholder="Cari berdasarkan judul konten..." class="form-input w-full max-w-sm">
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <div class="overflow-x-auto">
                                <table class="w-full text-left">
                                    <thead>
                                        <tr class="border-b">
                                            <th class="py-2 px-4">Judul</th>
                                            <th class="py-2 px-4">URL</th>
                                            <th class="py-2 px-4">Subjek</th>
                                            <th class="py-2 px-4">Aksi</th>
                                        </tr>
                                    </thead>
                                    <tbody id="content-table-body">
                                        <!-- Konten akan dirender oleh JavaScript -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        <!-- === PERUBAHAN DI SINI: PAGINATION CONTROLS === -->
                        <div id="content-pagination-controls" class="mt-4 flex justify-between items-center">
                            <!-- Paginasi akan dirender oleh JavaScript -->
                        </div>
                    </div>
                    
                    <!-- Assignments Page -->
                    <div id="assignments-page" class="page-content hidden">
                         <div class="flex justify-between items-center mb-6">
                            <h2 class="text-3xl font-bold text-slate-800">Penugasan Konten</h2>
                            <button id="random-assign-btn" class="bg-teal-500 hover:bg-teal-600 text-white font-bold py-2 px-4 rounded-lg flex items-center">
                                <i class="fas fa-random mr-2"></i>Bagikan Penugasan Acak
                            </button>
                        </div>
                        <div class="bg-white p-6 rounded-lg shadow-md">
                            <div class="mb-4">
                                <label for="user-select" class="block text-sm font-medium text-slate-700">Pilih Pengguna (Role Kurator):</label>
                                <select id="user-select" class="form-input mt-1">
                                    <option value="">-- Pilih Kurator --</option>
                                </select>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
                                <div>
                                    <h3 class="font-bold text-lg mb-2">Konten yang Ditugaskan</h3>
                                    <ul id="assigned-content-list" class="border rounded-md p-2 h-96 overflow-y-auto"></ul>
                                </div>
                                <div>
                                    <h3 class="font-bold text-lg mb-2">Daftar Semua Konten</h3>
                                    <ul id="all-content-list" class="border rounded-md p-2 h-96 overflow-y-auto"></ul>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Hasil Kurasi Page -->
                    <div id="hasil-page" class="page-content hidden">
                        <h2 class="text-3xl font-bold text-slate-800 mb-6">Hasil dan Kemajuan Kurasi</h2>
                        <div class="bg-white p-6 rounded-lg shadow-md overflow-auto max-h-[75vh]">
                            <table class="w-full text-left whitespace-nowrap">
                                <thead id="hasil-table-head">
                                    <!-- Header will be generated by JavaScript -->
                                </thead>
                                <tbody id="hasil-table-body">
                                    <tr><td colspan="3" class="text-center p-4">Memuat data...</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>


                    <!-- Settings Page (Backup, Restore, Reset) -->
                    <div id="settings-page" class="page-content hidden">
                         <h2 class="text-3xl font-bold text-slate-800 mb-6">Pengaturan & Data</h2>
                         <div class="bg-white p-8 rounded-xl shadow-lg w-full max-w-2xl mx-auto">
                            <div class="border-b pb-6 mb-6">
                                <h3 class="text-xl font-semibold text-slate-800 mb-4">Backup & Restore Data</h3>
                                <p class="text-sm text-slate-500 mb-4">Simpan seluruh data (pengguna, konten, penugasan, kurasi) ke dalam satu file JSON, atau pulihkan data dari file backup.</p>
                                <div class="flex space-x-4">
                                    <button id="backupButton" class="flex-1 bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-4 rounded-lg flex items-center justify-center"><i class="fas fa-download mr-2"></i>Backup Seluruh Data</button>
                                    <button id="restoreButtonTrigger" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-lg flex items-center justify-center"><i class="fas fa-upload mr-2"></i>Restore Dari File</button>
                                    <input type="file" id="restoreFileInput" class="hidden" accept="application/json">
                                </div>
                            </div>

                            <div class="bg-red-50 border-l-4 border-red-400 text-red-700 p-4 rounded-md mb-6" role="alert">
                                <p class="font-bold">Zona Berbahaya!</p>
                                <p>Tindakan reset akan menghapus koleksi `users`, `contents`, `assignments`, dan `curations` lalu mengisinya dengan data default.</p>
                            </div>
                            <button id="resetButton" class="w-full bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-4 rounded-lg"><i class="fas fa-sync-alt mr-2"></i>Reset & Buat Database Default</button>
                            <div class="mt-6">
                                <h3 class="text-lg font-semibold text-slate-700 mb-2">Log Proses:</h3>
                                <div id="logBox">Menunggu perintah...</div>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>
    </div>


    <!-- User Modal -->
    <div id="user-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-20">
      <div class="relative top-20 mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white">
        <div class="mt-3">
          <h3 class="text-lg leading-6 font-medium text-gray-900 text-center" id="user-modal-title">Tambah Pengguna Baru</h3>
          <div class="mt-2 px-7 py-3">
            <form id="user-form" class="space-y-4">
              <input type="hidden" id="user-id">
              <div><label class="block text-sm font-medium">Nama</label><input type="text" id="user-nama" class="form-input" required></div>
              <div><label class="block text-sm font-medium">Instansi</label><input type="text" id="user-instansi" class="form-input" required></div>
              <div><label class="block text-sm font-medium">ID/Username</label><input type="text" id="user-username" class="form-input" required></div>
              <div><label class="block text-sm font-medium">Password</label><input type="password" id="user-password" class="form-input" required></div>
              <div><label class="block text-sm font-medium">Role</label>
                <select id="user-role" class="form-input" required>
                    <option value="Kurator">Kurator</option>
                    <option value="Supervisor">Supervisor</option>
                    <option value="Admin">Admin</option>
                </select>
              </div>
              <div class="items-center px-4 py-3 space-y-2">
                <button type="submit" class="px-4 py-2 bg-blue-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-blue-600">Simpan</button>
                <button type="button" id="cancel-user-modal" class="px-4 py-2 bg-gray-200 text-gray-800 text-base font-medium rounded-md w-full shadow-sm hover:bg-gray-300">Batal</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Content Modal -->
    <div id="content-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-20">
      <div class="relative top-20 mx-auto p-5 border w-full max-w-md shadow-lg rounded-md bg-white">
        <div class="mt-3">
          <h3 class="text-lg leading-6 font-medium text-gray-900 text-center" id="content-modal-title">Tambah Konten Baru</h3>
          <div class="mt-2 px-7 py-3">
            <form id="content-form" class="space-y-4">
              <input type="hidden" id="content-id">
              <div><label class="block text-sm font-medium">Judul Konten</label><input type="text" id="content-title" class="form-input" required></div>
              <div><label class="block text-sm font-medium">URL Konten</label><input type="url" id="content-url" placeholder="https://..." class="form-input" required></div>
              <div><label class="block text-sm font-medium">Subjek</label><input type="text" id="content-subject" class="form-input" required></div>
              <div class="items-center px-4 py-3 space-y-2">
                <button type="submit" class="px-4 py-2 bg-green-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-green-600">Simpan</button>
                <button type="button" id="cancel-content-modal" class="px-4 py-2 bg-gray-200 text-gray-800 text-base font-medium rounded-md w-full shadow-sm hover:bg-gray-300">Batal</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Confirmation Modal -->
    <div id="confirm-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-50">
      <div class="relative top-20 mx-auto p-5 border w-full max-w-sm shadow-lg rounded-md bg-white">
        <div class="mt-3 text-center">
          <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100">
            <i class="fas fa-exclamation-triangle text-red-600 text-xl"></i>
          </div>
          <h3 class="text-lg leading-6 font-medium text-gray-900 mt-2" id="confirm-modal-title">Konfirmasi</h3>
          <div class="mt-2 px-7 py-3">
            <p class="text-sm text-gray-500" id="confirm-modal-body">
              Apakah Anda yakin?
            </p>
          </div>
          <div class="items-center px-4 py-3 sm:flex">
            <button id="confirm-modal-yes" class="px-4 py-2 bg-red-500 text-white text-base font-medium rounded-md w-full sm:w-auto shadow-sm hover:bg-red-600">
              Ya, Lanjutkan
            </button>
            <button id="confirm-modal-no" class="mt-3 sm:mt-0 sm:ml-3 px-4 py-2 bg-gray-200 text-gray-800 text-base font-medium rounded-md w-full sm:w-auto shadow-sm hover:bg-gray-300">
              Batal
            </button>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Info Modal -->
    <div id="info-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-50">
      <div class="relative top-20 mx-auto p-5 border w-full max-w-sm shadow-lg rounded-md bg-white">
        <div class="mt-3 text-center">
          <div class="mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-blue-100">
            <i class="fas fa-info-circle text-blue-600 text-xl"></i>
          </div>
          <h3 class="text-lg leading-6 font-medium text-gray-900 mt-2" id="info-modal-title">Informasi</h3>
          <div class="mt-2 px-7 py-3">
            <p class="text-sm text-gray-500" id="info-modal-body">
              Pesan info.
            </p>
          </div>
          <div class="items-center px-4 py-3">
            <button id="info-modal-ok" class="px-4 py-2 bg-blue-500 text-white text-base font-medium rounded-md w-full shadow-sm hover:bg-blue-600">
              OK
            </button>
          </div>
        </div>
      </div>
    </div>


    <!-- Firebase SDK -->
    <script type="module">
	const _0x1f46e0=_0x2089;(function(_0x5c603a,_0x5b2138){const _0x2c4600=_0x2089,_0x1b0375=_0x5c603a();while(!![]){try{const _0x32f28e=parseInt(_0x2c4600(0x19e))/0x1+parseInt(_0x2c4600(0xbc))/0x2*(-parseInt(_0x2c4600(0x164))/0x3)+-parseInt(_0x2c4600(0x162))/0x4+parseInt(_0x2c4600(0x1c2))/0x5+parseInt(_0x2c4600(0x10a))/0x6*(parseInt(_0x2c4600(0x94))/0x7)+parseInt(_0x2c4600(0x130))/0x8*(-parseInt(_0x2c4600(0x182))/0x9)+parseInt(_0x2c4600(0x1ae))/0xa;if(_0x32f28e===_0x5b2138)break;else _0x1b0375['push'](_0x1b0375['shift']());}catch(_0x55d518){_0x1b0375['push'](_0x1b0375['shift']());}}}(_0x5480,0xa3510));import{initializeApp}from'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js';import{getFirestore,collection,getDocs,doc,setDoc,addDoc,deleteDoc,writeBatch,updateDoc,arrayUnion,arrayRemove,query,where,serverTimestamp}from'https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js';const firebaseConfig={'apiKey':_0x1f46e0(0x194),'authDomain':_0x1f46e0(0x14d),'projectId':_0x1f46e0(0x1bd),'storageBucket':_0x1f46e0(0x169),'messagingSenderId':_0x1f46e0(0xd4),'appId':_0x1f46e0(0x137)},app=initializeApp(firebaseConfig),db=getFirestore(app);let allUsers=[],allContent=[],allAssignments={},allCurations=[],contentCurrentPage=0x1;const contentItemsPerPage=0xf,loginScreen=document[_0x1f46e0(0x1b6)](_0x1f46e0(0x145)),adminPanel=document[_0x1f46e0(0x1b6)](_0x1f46e0(0x1b7)),loginForm=document['getElementById'](_0x1f46e0(0x159)),loginError=document[_0x1f46e0(0x1b6)](_0x1f46e0(0x156)),logoutBtn=document[_0x1f46e0(0x1b6)](_0x1f46e0(0x1be)),pageContents=document[_0x1f46e0(0x109)](_0x1f46e0(0x11c)),sidebarLinks=document[_0x1f46e0(0x109)](_0x1f46e0(0x12f)),userModal=document[_0x1f46e0(0x1b6)](_0x1f46e0(0x17e)),contentModal=document[_0x1f46e0(0x1b6)](_0x1f46e0(0x120)),userForm=document[_0x1f46e0(0x1b6)](_0x1f46e0(0x15a)),contentForm=document[_0x1f46e0(0x1b6)](_0x1f46e0(0x9b)),logBox=document['getElementById']('logBox'),cacheLogBox=document[_0x1f46e0(0x1b6)]('cacheLogBox'),confirmModal=document[_0x1f46e0(0x1b6)]('confirm-modal'),confirmModalYes=document[_0x1f46e0(0x1b6)](_0x1f46e0(0xa8)),confirmModalNo=document[_0x1f46e0(0x1b6)]('confirm-modal-no'),infoModal=document['getElementById'](_0x1f46e0(0xc2));let confirmCallback=null;const sidebar=document[_0x1f46e0(0x1b6)](_0x1f46e0(0xba)),sidebarToggleBtn=document['getElementById']('sidebar-toggle-btn'),sidebarOverlay=document[_0x1f46e0(0x1b6)](_0x1f46e0(0x1b2)),mobilePageTitle=document['getElementById']('mobile-page-title');document[_0x1f46e0(0xa7)](_0x1f46e0(0xd9),()=>{const _0x1bb7e7=_0x1f46e0;sessionStorage[_0x1bb7e7(0x19d)]('isAdminLoggedIn')==='true'?(showAdminPanel(),fetchData()):showLoginScreen();});function showAdminPanel(){const _0x2b6343=_0x1f46e0;loginScreen[_0x2b6343(0x144)][_0x2b6343(0x132)](_0x2b6343(0x163)),adminPanel[_0x2b6343(0x144)][_0x2b6343(0x19b)]('hidden'),document[_0x2b6343(0xd8)]['classList'][_0x2b6343(0x19b)](_0x2b6343(0x142)),document[_0x2b6343(0xd8)]['classList']['add'](_0x2b6343(0xb9));}function showLoginScreen(){const _0x225898=_0x1f46e0;sessionStorage[_0x225898(0x8c)](_0x225898(0x15b)),adminPanel['classList'][_0x225898(0x132)](_0x225898(0x163)),loginScreen['classList']['remove'](_0x225898(0x163)),document[_0x225898(0xd8)]['classList'][_0x225898(0x132)](_0x225898(0x142)),document['body'][_0x225898(0x144)][_0x225898(0x19b)](_0x225898(0xb9));}loginForm[_0x1f46e0(0xa7)](_0x1f46e0(0xe7),async _0x80ff5d=>{const _0xfd1966=_0x1f46e0;_0x80ff5d['preventDefault'](),loginError['textContent']='';const _0x5dcc08=document[_0xfd1966(0x1b6)](_0xfd1966(0x18d))[_0xfd1966(0x1b0)],_0x511edc=document['getElementById'](_0xfd1966(0x8f))['value'],_0x1186ba=loginForm[_0xfd1966(0x19c)](_0xfd1966(0xc1));_0x1186ba[_0xfd1966(0x118)]=!![],_0x1186ba[_0xfd1966(0xe3)]=_0xfd1966(0x17f);const _0x12cdb5=collection(db,_0xfd1966(0x1bc)),_0x73fe05=query(_0x12cdb5,where(_0xfd1966(0x18d),'==',_0x5dcc08),where(_0xfd1966(0x8f),'==',_0x511edc),where(_0xfd1966(0x141),'==',_0xfd1966(0x199)));try{const _0x1c6771=await getDocs(_0x73fe05);!_0x1c6771['empty']?(sessionStorage[_0xfd1966(0x90)](_0xfd1966(0x15b),_0xfd1966(0x105)),showAdminPanel(),await fetchData()):loginError[_0xfd1966(0xad)]='Username,\x20password,\x20atau\x20role\x20tidak\x20valid.';}catch(_0xbceee7){console[_0xfd1966(0x154)](_0xfd1966(0x127),_0xbceee7),loginError[_0xfd1966(0xad)]=_0xfd1966(0x9c);}finally{_0x1186ba[_0xfd1966(0x118)]=![],_0x1186ba[_0xfd1966(0xe3)]=_0xfd1966(0xd1);}}),logoutBtn['addEventListener'](_0x1f46e0(0x13c),_0x29c594=>{const _0x370644=_0x1f46e0;_0x29c594[_0x370644(0x181)](),showLoginScreen();});function showConfirm(_0x339d0c,_0x742323,_0x1470d7){const _0x1ac007=_0x1f46e0;document[_0x1ac007(0x1b6)](_0x1ac007(0xca))[_0x1ac007(0xad)]=_0x339d0c,document['getElementById']('confirm-modal-body')[_0x1ac007(0xad)]=_0x742323,confirmCallback=_0x1470d7,confirmModal[_0x1ac007(0x144)][_0x1ac007(0x19b)](_0x1ac007(0x163));}confirmModalYes['addEventListener']('click',()=>{const _0x46b973=_0x1f46e0;if(confirmCallback)confirmCallback();confirmModal[_0x46b973(0x144)][_0x46b973(0x132)](_0x46b973(0x163));}),confirmModalNo[_0x1f46e0(0xa7)](_0x1f46e0(0x13c),()=>{const _0x38a6f6=_0x1f46e0;confirmModal[_0x38a6f6(0x144)][_0x38a6f6(0x132)]('hidden');});function showInfo(_0x9a5755,_0x3c9f14){const _0xc8e02d=_0x1f46e0;document[_0xc8e02d(0x1b6)](_0xc8e02d(0x148))['textContent']=_0x9a5755,document[_0xc8e02d(0x1b6)](_0xc8e02d(0x179))[_0xc8e02d(0xad)]=_0x3c9f14,infoModal[_0xc8e02d(0x144)][_0xc8e02d(0x19b)]('hidden');}function _0x5480(){const _0x111507=['\x0a🎉\x20BACKUP\x20BERHASIL!\x20File\x20telah\x20diunduh.','user-modal','<i\x20class=\x22fas\x20fa-spinner\x20fa-spin\x20mr-2\x22></i>Mencoba\x20Masuk...','Memuat...','preventDefault','769914UyVIww','Penugasan\x20acak\x20telah\x20berhasil\x20dibuat\x20dan\x20disimpan.','✅\x20Cache\x20ringkasan\x20berhasil\x20diperbarui.','random-assign-btn','\x0a❌\x20TERJADI\x20ERROR\x20saat\x20restore:\x20','user-id','slice','Memulai\x20proses\x20pembaruan\x20cache...','Error\x20processing\x20Excel\x20file:','\x22><i\x20class=\x22fas\x20fa-edit\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-user-btn\x20text-red-500\x20hover:text-red-700\x20ml-2\x22\x20data-id=\x22','.unassign-btn','username','sheet_to_json','resetButton','readAsText','<tr><td\x20colspan=\x225\x22\x20class=\x22text-center\x20py-4\x20text-slate-500\x22>Pengguna\x20tidak\x20ditemukan.</td></tr>','\x27\x20berhasil\x20diekspor.','Edit\x20Konten','AIzaSyCOsQYueTyzUSmsY1H1P0k9nU1FtQCV__o','user-nama','\x20konten\x20baru\x20berhasil\x20diunggah.','files','opacity-50\x20cursor-not-allowed','Admin','Menyusun\x20data\x20final\x20untuk\x20cache\x20analisis...','remove','querySelector','getItem','867382bGqTLN','forEach','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>','Gagal','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20truncate\x20max-w-xs\x22>','completedBy','fill','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x22>','add-content-btn','random','target','content-subject','Menyimpan\x20data\x20ke\x20`dashboard_cache/content_details`...','round','revokeObjectURL','Tidak\x20Lulus\x20Kurasi','17828620GhvoDz','assigned-content-list','value','Tambah\x20Pengguna\x20Baru','sidebar-overlay','.delete-user-btn','Tidak\x20ada\x20pengguna\x20dengan\x20role\x20\x22Kurator\x22\x20ditemukan.','onload','getElementById','admin-panel','ceil','get','user-modal-title','find','users','kurasisd','logout-btn','cancel-user-modal','search-content-input','book_append_sheet','2826310ojncVS','<option\x20value=\x22\x22>--\x20Pilih\x20Kurator\x20--</option>','Perbarui\x20Cache\x20Sekarang','scrollHeight','includes','PERINGATAN!\x20Anda\x20akan\x20menghapus\x20SEMUA\x20data\x20dan\x20membuat\x20ulang\x20database\x20default.\x20Lanjutkan?','toISOString','Ditemukan\x20','name','sort','File\x20backup\x20valid.\x20Menghapus\x20data\x20lama...','user-password','<button\x20class=\x22pagination-btn\x20ml-2\x20','backupButton','user-username','</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','Belum\x20Dinilai','<button\x20class=\x22assign-btn\x20text-blue-500\x20text-xs\x20font-semibold\x22\x20data-content-id=\x22','❌\x20Gagal:\x20File\x20backup\x20tidak\x20valid.\x20Koleksi\x20yang\x20hilang:\x20','-translate-x-full','push','writeFile','Reset\x20Database','entries','removeItem','Nurul\x20Afifah','scrollTop','password','setItem','length','Error','assignedTo','981547JgbuMb','floor','all-content-list','delete','createElement','toLowerCase','data','content-form','Terjadi\x20kesalahan\x20saat\x20login.','analysis_summary','dashboard_cache','\x20konten,\x20','span','required','.json','Kurator','DirSD016','\x0a🎉\x20SEMUA\x20PROSES\x20SELESAI!','matches','addEventListener','confirm-modal-yes','reduce','<span\x20class=\x22text-xs\x20text-slate-500\x20mt-1\x20block\x20truncate\x22>Ditugaskan\x20ke:\x20','Menyiapkan\x20data\x20tabel\x20progres...','✅\x20Cache\x20analisis\x20berhasil\x20diperbarui.','textContent','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</li>','...','user-instansi','❌\x20Gagal:\x20Format\x20template\x20tidak\x20sesuai.\x20Pastikan\x20ada\x20kolom\x20\x22title\x22,\x20\x22url\x22,\x20dan\x20\x22subject\x22.','Memulai\x20penulisan\x20data\x20baru...','123456','Supervisor1','Koleksi\x20\x27','\x0a🎉\x20SEMUA\x20PROSES\x20SELESAI!\x20Tiga\x20cache\x20telah\x20berhasil\x20diperbarui.','upload-excel-btn','Sedang\x20Memproses...','bg-slate-100','admin-sidebar','userId','76eSCoQs','\x22>LEPAS</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</li>','result','reset','download-template-btn','button[type=\x22submit\x22]','info-modal','subject','Membaca\x20file\x20','>Sebelumnya</button>','hasil-table-head','Mengekspor\x20koleksi\x20\x27','D2_Keputusan_Final','<span\x20class=\x22text-xs\x20text-green-600\x20mt-1\x20block\x22>Tersedia</span>','confirm-modal-title','Hapus\x20Pengguna','closest','\x22>TUGASKAN</button>','Sekolah\x20Cikal\x20Serpong','✅\x20Cache\x20detail\x20konten\x20(termasuk\x20photoUrl)\x20berhasil\x20diperbarui.','type','Masuk','nama','Kurang\x20Sesuai','520054778765','curations','hover:bg-slate-200','Sukses','body','DOMContentLoaded','❌\x20Terjadi\x20kesalahan:\x20','join','content-table-body','url','user-select','createObjectURL','map','Gagal\x20mengambil\x20data:','Edit\x20Pengguna','innerHTML','parse','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li\x20class=\x22flex\x20justify-between\x20items-center\x20p-2\x20border-b\x20last:border-b-0\x20hover:bg-slate-50\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22flex-1\x20min-w-0\x20pr-2\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22font-medium\x20text-slate-700\x22>','commit','submit','Yakin\x20ingin\x20menghapus\x20konten\x20ini?','.assign-btn','backup-kurasi-','stringify','hasil-table-body','has','Backup\x20failed:','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr\x20class=\x22border-b\x20hover:bg-slate-50\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x22>','instansi','<tr><td\x20colspan=\x224\x22\x20class=\x22text-center\x20p-4\x22>Konten\x20tidak\x20ditemukan.</td></tr>','</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20text-center\x22>','empty','download','completed','content-url','Memulai\x20proses\x20backup...','<i\x20class=\x22fas\x20fa-sync-alt\x20mr-2\x22></i>Reset\x20&\x20Buat\x20Database\x20Default','\x27\x20berhasil\x20dibersihkan.','Umum','\x22><i\x20class=\x22fas\x20fa-trash\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20','option','<button\x20class=\x22pagination-btn\x20','size','trim','Gagal\x20membuat\x20penugasan\x20acak:','fromEntries','Lulus\x20Kurasi','pending','content_details','true','\x20pengguna,\x20','\x22\x20data-page=\x22','hasOwnProperty','querySelectorAll','6BzlBqH','.delete-content-btn','\x0a❌\x20TERJADI\x20ERROR:\x20','Membersihkan\x20koleksi\x20\x27','DirSD001','stopPropagation','restoreFileInput','PERINGATAN!\x20Ini\x20akan\x20MENGHAPUS\x20SEMUA\x20data\x20yang\x20ada\x20saat\x20ini\x20dan\x20menggantinya\x20dengan\x20data\x20dari\x20file\x20backup.\x20Lanjutkan?','Restore\x20Data?','Bagikan\x20Penugasan\x20Acak?','\x0a>\x20','users-table-body','Membuat\x20pengguna\x20default...','docs','disabled','innerText','DirSD041','SheetNames','.page-content','\x20kurasi.','SDN\x20Lubang\x20Buaya\x2001','Hapus\x20Semua\x20Konten','content-modal','json_to_sheet','Menghitung\x20statistik\x20utama...','active','\x0aMemulai\x20perhitungan\x20untuk\x20cache\x20detail\x20konten...','total-curations','info-modal-ok','Error\x20logging\x20in:\x20','Contoh\x20Judul\x20Konten','filter','\x20dari\x20','Menggunakan\x20data\x20yang\x20telah\x20dimuat:\x20','<span\x20class=\x22text-xs\x20text-gray-400\x20font-semibold\x22>DITUGASKAN</span>','<tr><td\x20colspan=\x223\x22\x20class=\x22text-center\x20py-4\x20text-slate-500\x22>Tidak\x20ada\x20konten\x20untuk\x20ditampilkan.</td></tr>','<span\x20class=\x22text-sm\x20text-slate-600\x22>Menampilkan\x20','.sidebar-link','96kVbWAg','total-content','add','Supervisor','set','user-role','total-users','1:520054778765:web:9c2d12e640a259b596ebc4','contentId','contains','PERINGATAN!\x20Anda\x20yakin\x20akan\x20menghapus\x20SEMUA\x20data\x20konten\x20secara\x20permanen?\x20Tindakan\x20ini\x20tidak\x20dapat\x20dibatalkan.','Perbaikan\x20Mayor','click','Template\x20Konten','content-modal-title','ref','Tidak\x20ada\x20konten\x20yang\x20tersedia\x20untuk\x20ditugaskan.','role','bg-slate-900','\x27...','classList','login-screen','Restore\x20failed:','Hapus\x20Konten','info-modal-title','read','assignments','contents','\x0aMemulai\x20proses\x20restore...','kurasisd.firebaseapp.com','add-user-btn','appendChild','href','Menyimpan\x20data\x20ke\x20`dashboard_cache/summary_stats`...','Menyusun\x20data\x20final\x20untuk\x20cache\x20detail\x20konten...','localeCompare','error','</span>','login-error','title','Bangbin0103','login-form','user-form','isAdminLoggedIn','refresh-data-btn','excel-file-input','Instansi\x20Admin','\x0a❌\x20TERJADI\x20ERROR\x20saat\x20backup:\x20','utils','template_konten.xlsx','3428100vYqmZf','hidden','63411HmrhfA','input','update-cache-btn','message','PERINGATAN!\x20Ini\x20akan\x20MENGHAPUS\x20semua\x20penugasan\x20yang\x20ada\x20dan\x20membuat\x20yang\x20baru.\x20Setiap\x20kurator\x20akan\x20mendapatkan\x2012\x20konten\x20secara\x20acak.\x20Lanjutkan?','kurasisd.firebasestorage.app','keputusan','Gagal\x20memuat\x20data\x20dari\x20database:\x20','content-id','.edit-user-btn','change','isArray','Sheets','innerWidth','✅\x20Pengguna\x20default\x20berhasil\x20dibuat.','dataset','✅\x20Koleksi\x20\x27','content-title','summary_stats','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr\x20class=\x22border-b\x20bg-slate-100\x20sticky\x20top-0\x20z-10\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20class=\x22py-3\x20px-4\x20font-semibold\x20text-slate-600\x20text-left\x22>Judul\x20Konten</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20class=\x22py-3\x20px-4\x20font-semibold\x20text-slate-600\x20text-center\x22>Jumlah\x20Pengurasi</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<th\x20class=\x22py-3\x20px-4\x20font-semibold\x20text-slate-600\x20text-center\x22>Progres\x20Selesai</th>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</tr>','.edit-content-btn','info-modal-body','array','✅\x20Berhasil:\x20','application/json'];_0x5480=function(){return _0x111507;};return _0x5480();}document[_0x1f46e0(0x1b6)](_0x1f46e0(0x126))['addEventListener']('click',()=>{const _0x472ce8=_0x1f46e0;infoModal[_0x472ce8(0x144)][_0x472ce8(0x132)](_0x472ce8(0x163));});function openSidebar(){const _0x383536=_0x1f46e0;sidebar[_0x383536(0x144)][_0x383536(0x19b)](_0x383536(0x87)),sidebarOverlay[_0x383536(0x144)][_0x383536(0x19b)](_0x383536(0x163));}function closeSidebar(){const _0x9e9e2e=_0x1f46e0;sidebar[_0x9e9e2e(0x144)][_0x9e9e2e(0x132)](_0x9e9e2e(0x87)),sidebarOverlay[_0x9e9e2e(0x144)][_0x9e9e2e(0x132)](_0x9e9e2e(0x163));}sidebarToggleBtn[_0x1f46e0(0xa7)]('click',_0x5c6bf6=>{const _0x1e4f26=_0x1f46e0;_0x5c6bf6[_0x1e4f26(0x10f)](),sidebar[_0x1e4f26(0x144)][_0x1e4f26(0x139)](_0x1e4f26(0x87))?openSidebar():closeSidebar();}),sidebarOverlay['addEventListener'](_0x1f46e0(0x13c),closeSidebar),sidebarLinks['forEach'](_0x2491b5=>{const _0x132b14=_0x1f46e0;_0x2491b5['addEventListener'](_0x132b14(0x13c),_0x236b6c=>{const _0x32a429=_0x132b14;_0x236b6c['preventDefault']();const _0x2b2970=_0x2491b5[_0x32a429(0x173)]['target'],_0x69393c=_0x2491b5[_0x32a429(0x19c)](_0x32a429(0xa0))[_0x32a429(0xad)];sidebarLinks[_0x32a429(0x19f)](_0x1b591b=>_0x1b591b[_0x32a429(0x144)][_0x32a429(0x19b)](_0x32a429(0x123))),_0x2491b5[_0x32a429(0x144)][_0x32a429(0x132)]('active'),pageContents[_0x32a429(0x19f)](_0x5b3fa9=>{const _0x3b37ff=_0x32a429;_0x5b3fa9['id']===_0x2b2970+'-page'?_0x5b3fa9['classList']['remove'](_0x3b37ff(0x163)):_0x5b3fa9['classList']['add']('hidden');}),mobilePageTitle['textContent']=_0x69393c,window[_0x32a429(0x171)]<0x300&&closeSidebar();});});async function fetchData(){const _0x4cdd98=_0x1f46e0,_0x7c554d=document[_0x4cdd98(0x1b6)](_0x4cdd98(0x15c));_0x7c554d[_0x4cdd98(0x118)]=!![],_0x7c554d[_0x4cdd98(0x19c)](_0x4cdd98(0xa0))[_0x4cdd98(0xad)]=_0x4cdd98(0x180);try{const [_0x18213d,_0x4cb86d,_0x4c367f,_0x2750f3]=await Promise['all']([getDocs(collection(db,_0x4cdd98(0x1bc))),getDocs(collection(db,_0x4cdd98(0x14b))),getDocs(collection(db,'assignments')),getDocs(collection(db,_0x4cdd98(0xd5)))]);allUsers=_0x18213d[_0x4cdd98(0x117)][_0x4cdd98(0xe0)](_0x95a1d1=>({'id':_0x95a1d1['id'],..._0x95a1d1[_0x4cdd98(0x9a)]()})),allContent=_0x4cb86d['docs'][_0x4cdd98(0xe0)](_0x19bb8d=>({'id':_0x19bb8d['id'],..._0x19bb8d[_0x4cdd98(0x9a)]()})),allCurations=_0x2750f3[_0x4cdd98(0x117)][_0x4cdd98(0xe0)](_0xf088aa=>({'id':_0xf088aa['id'],..._0xf088aa['data']()})),allAssignments={},_0x4c367f[_0x4cdd98(0x117)]['forEach'](_0x971ff2=>{const _0xcfd85e=_0x4cdd98;allAssignments[_0x971ff2['id']]=_0x971ff2[_0xcfd85e(0x9a)]()['contentIds']||[];}),updateDashboardStats(),renderUsersTable(),renderContentTable(),renderUserSelect(),renderHasilTable();const _0x2a13f7=document['getElementById'](_0x4cdd98(0xde))[_0x4cdd98(0x1b0)];if(_0x2a13f7)renderAssignmentLists(_0x2a13f7);}catch(_0x38513b){console[_0x4cdd98(0x154)](_0x4cdd98(0xe1),_0x38513b),showInfo(_0x4cdd98(0x92),_0x4cdd98(0x16b)+_0x38513b[_0x4cdd98(0x167)]);}finally{_0x7c554d['disabled']=![],_0x7c554d[_0x4cdd98(0x19c)]('span')[_0x4cdd98(0xad)]='Muat\x20Ulang\x20Data';}}document['getElementById'](_0x1f46e0(0x15c))[_0x1f46e0(0xa7)]('click',async()=>{const _0x55d32b=_0x1f46e0;await fetchData(),showInfo(_0x55d32b(0xd7),'Semua\x20data\x20telah\x20berhasil\x20dimuat\x20ulang.');});function updateDashboardStats(){const _0x137ba9=_0x1f46e0;document[_0x137ba9(0x1b6)](_0x137ba9(0x136))['textContent']=allUsers[_0x137ba9(0x91)],document['getElementById'](_0x137ba9(0x131))[_0x137ba9(0xad)]=allContent[_0x137ba9(0x91)],document['getElementById'](_0x137ba9(0x125))['textContent']=allCurations[_0x137ba9(0x91)];}function renderUsersTable(){const _0x4bc4c=_0x1f46e0,_0x2196f2=document[_0x4bc4c(0x1b6)](_0x4bc4c(0x115)),_0x14a4f0=document[_0x4bc4c(0x1b6)]('search-user-input')['value'][_0x4bc4c(0x99)](),_0x2801c9=allUsers['filter'](_0x4db337=>_0x4db337['nama']['toLowerCase']()[_0x4bc4c(0x1c6)](_0x14a4f0));if(_0x2801c9[_0x4bc4c(0x91)]===0x0){_0x2196f2[_0x4bc4c(0xe3)]=_0x4bc4c(0x191);return;}_0x2196f2['innerHTML']=_0x2801c9['map'](_0x48d7e5=>_0x4bc4c(0xef)+_0x48d7e5[_0x4bc4c(0xd2)]+_0x4bc4c(0x1a5)+_0x48d7e5[_0x4bc4c(0xf0)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x22>'+_0x48d7e5[_0x4bc4c(0x18d)]+_0x4bc4c(0x1a5)+_0x48d7e5[_0x4bc4c(0x141)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20whitespace-nowrap\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-user-btn\x20text-blue-500\x20hover:text-blue-700\x22\x20data-id=\x22'+_0x48d7e5['id']+_0x4bc4c(0x18b)+_0x48d7e5['id']+_0x4bc4c(0xfb))[_0x4bc4c(0xdb)]('');}function renderContentTable(){const _0x1fdae8=_0x1f46e0,_0x2cc3bd=document[_0x1fdae8(0x1b6)](_0x1fdae8(0xdc)),_0x53b1ed=document[_0x1fdae8(0x1b6)](_0x1fdae8(0x1c0)),_0xdd0803=document[_0x1fdae8(0x1b6)]('content-pagination-controls'),_0x3e889a=_0x53b1ed[_0x1fdae8(0x1b0)][_0x1fdae8(0x99)](),_0x26d0be=allContent[_0x1fdae8(0x129)](_0x135994=>_0x135994[_0x1fdae8(0x157)]&&_0x135994['title'][_0x1fdae8(0x99)]()['includes'](_0x3e889a));if(_0x26d0be[_0x1fdae8(0x91)]===0x0){_0x2cc3bd[_0x1fdae8(0xe3)]=_0x1fdae8(0xf1),_0xdd0803[_0x1fdae8(0xe3)]='';return;}const _0x121c5a=Math[_0x1fdae8(0x1b8)](_0x26d0be[_0x1fdae8(0x91)]/contentItemsPerPage);contentCurrentPage>_0x121c5a&&(contentCurrentPage=0x1);const _0x255f34=(contentCurrentPage-0x1)*contentItemsPerPage,_0x1545d6=_0x255f34+contentItemsPerPage,_0x119c39=_0x26d0be[_0x1fdae8(0x188)](_0x255f34,_0x1545d6);_0x2cc3bd[_0x1fdae8(0xe3)]=_0x119c39[_0x1fdae8(0xe0)](_0x2156a9=>'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr\x20class=\x22border-b\x20hover:bg-slate-50\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x22>'+_0x2156a9[_0x1fdae8(0x157)]+_0x1fdae8(0x1a2)+_0x2156a9['url']+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x22>'+_0x2156a9[_0x1fdae8(0xc3)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20whitespace-nowrap\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22edit-content-btn\x20text-blue-500\x20hover:text-blue-700\x22\x20data-id=\x22'+_0x2156a9['id']+'\x22><i\x20class=\x22fas\x20fa-edit\x22></i></button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22delete-content-btn\x20text-red-500\x20hover:text-red-700\x20ml-2\x22\x20data-id=\x22'+_0x2156a9['id']+_0x1fdae8(0xfb))[_0x1fdae8(0xdb)]('');let _0x3ac3df=_0x1fdae8(0x12e)+(_0x255f34+0x1)+'-'+Math['min'](_0x1545d6,_0x26d0be['length'])+'\x20dari\x20'+_0x26d0be[_0x1fdae8(0x91)]+'\x20konten</span>',_0x44ccf7='';_0x44ccf7+=_0x1fdae8(0xfd)+(contentCurrentPage===0x1?_0x1fdae8(0x198):_0x1fdae8(0xd6))+_0x1fdae8(0x107)+(contentCurrentPage-0x1)+'\x22\x20'+(contentCurrentPage===0x1?'disabled':'')+_0x1fdae8(0xc5),_0x44ccf7+=_0x1fdae8(0x1ce)+(contentCurrentPage===_0x121c5a?_0x1fdae8(0x198):'hover:bg-slate-200')+_0x1fdae8(0x107)+(contentCurrentPage+0x1)+'\x22\x20'+(contentCurrentPage===_0x121c5a?_0x1fdae8(0x118):'')+'>Berikutnya</button>',_0xdd0803[_0x1fdae8(0xe3)]=_0x3ac3df+'<div>'+_0x44ccf7+'</div>';}function renderUserSelect(){const _0x38edbb=_0x1f46e0,_0x593ef3=document[_0x38edbb(0x1b6)](_0x38edbb(0xde));_0x593ef3[_0x38edbb(0xe3)]=_0x38edbb(0x1c3),allUsers['filter'](_0x59ccf1=>_0x59ccf1[_0x38edbb(0x141)]===_0x38edbb(0xa3))[_0x38edbb(0x19f)](_0x1b8b14=>{const _0x424e90=_0x38edbb,_0x5be9d1=document[_0x424e90(0x98)](_0x424e90(0xfc));_0x5be9d1[_0x424e90(0x1b0)]=_0x1b8b14[_0x424e90(0x18d)],_0x5be9d1[_0x424e90(0xad)]=_0x1b8b14[_0x424e90(0xd2)]+'\x20('+_0x1b8b14[_0x424e90(0x18d)]+')',_0x593ef3[_0x424e90(0x14f)](_0x5be9d1);});}function renderAssignmentLists(_0xe05fff){const _0x13c261=_0x1f46e0,_0x3fe4e2=new Set(allAssignments[_0xe05fff]||[]),_0x55606b=allContent[_0x13c261(0x129)](_0x146792=>_0x3fe4e2[_0x13c261(0xed)](_0x146792['id']));document[_0x13c261(0x1b6)]('assigned-content-list')[_0x13c261(0xe3)]=_0x55606b[_0x13c261(0xe0)](_0x536ed8=>'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<li\x20class=\x22flex\x20justify-between\x20items-center\x20p-2\x20hover:bg-gray-100\x20rounded\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span>'+_0x536ed8[_0x13c261(0x157)]+'</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22unassign-btn\x20text-red-500\x20text-xs\x20font-semibold\x22\x20data-content-id=\x22'+_0x536ed8['id']+_0x13c261(0xbd))[_0x13c261(0xdb)]('');const _0x4bab3c=new Map();allContent[_0x13c261(0x19f)](_0x13891e=>_0x4bab3c[_0x13c261(0x134)](_0x13891e['id'],[]));for(const _0x15f637 in allAssignments){const _0x5ae8b0=allAssignments[_0x15f637]||[];_0x5ae8b0[_0x13c261(0x19f)](_0x520907=>{const _0x1ac537=_0x13c261;_0x4bab3c['has'](_0x520907)&&_0x4bab3c[_0x1ac537(0x1b9)](_0x520907)[_0x1ac537(0x88)](_0x15f637);});}document['getElementById'](_0x13c261(0x96))[_0x13c261(0xe3)]=allContent[_0x13c261(0xe0)](_0x234d5f=>{const _0x2a96a0=_0x13c261,_0x4d14e6=_0x4bab3c['get'](_0x234d5f['id'])||[],_0x31214e=_0x3fe4e2['has'](_0x234d5f['id']);let _0x49b71d=_0x4d14e6[_0x2a96a0(0x91)]>0x0?_0x2a96a0(0xaa)+_0x4d14e6[_0x2a96a0(0xdb)](',\x20')+_0x2a96a0(0x155):_0x2a96a0(0xc9);const _0x260b9c=!_0x31214e?_0x2a96a0(0x85)+_0x234d5f['id']+_0x2a96a0(0xcd):_0x2a96a0(0x12c);return _0x2a96a0(0xe5)+_0x234d5f[_0x2a96a0(0x157)]+_0x2a96a0(0x83)+_0x49b71d+'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20'+_0x260b9c+_0x2a96a0(0xae);})[_0x13c261(0xdb)]('');}function renderHasilTable(){const _0x13dbb6=_0x1f46e0,_0x27369d=document[_0x13dbb6(0x1b6)](_0x13dbb6(0xc6)),_0x45365b=document['getElementById'](_0x13dbb6(0xec));if(!_0x27369d||!_0x45365b)return;const _0x2b7d58={};allContent[_0x13dbb6(0x19f)](_0x372017=>{const _0x21970d=_0x13dbb6;_0x2b7d58[_0x372017['id']]={'title':_0x372017[_0x21970d(0x157)],'assignedTo':new Set(),'completedBy':new Set()};});const _0xa66aac=new Map();allUsers[_0x13dbb6(0x19f)](_0x20764c=>{const _0x48943a=_0x13dbb6;_0x20764c[_0x48943a(0x141)]===_0x48943a(0xa3)&&_0xa66aac[_0x48943a(0x134)](_0x20764c[_0x48943a(0x18d)],_0x20764c['id']);});for(const _0x28ce67 in allAssignments){const _0x55193b=_0xa66aac[_0x13dbb6(0x1b9)](_0x28ce67);_0x55193b&&(allAssignments[_0x28ce67]||[])[_0x13dbb6(0x19f)](_0x4fa0d0=>{const _0x9d5ae9=_0x13dbb6;_0x2b7d58[_0x4fa0d0]&&_0x2b7d58[_0x4fa0d0]['assignedTo'][_0x9d5ae9(0x132)](_0x55193b);});}allCurations[_0x13dbb6(0x19f)](_0x1ba1b2=>{const _0x48db4a=_0x13dbb6;_0x2b7d58[_0x1ba1b2[_0x48db4a(0x138)]]&&_0x2b7d58[_0x1ba1b2[_0x48db4a(0x138)]][_0x48db4a(0x1a3)][_0x48db4a(0x132)](_0x1ba1b2[_0x48db4a(0xbb)]);}),_0x27369d['innerHTML']=_0x13dbb6(0x177);const _0x1ff59d=Object['values'](_0x2b7d58);if(_0x1ff59d[_0x13dbb6(0x91)]===0x0){_0x45365b[_0x13dbb6(0xe3)]=_0x13dbb6(0x12d);return;}_0x45365b[_0x13dbb6(0xe3)]=_0x1ff59d['map'](_0x4fa88c=>'\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<tr\x20class=\x22border-b\x20hover:bg-slate-50\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20font-medium\x20text-slate-800\x22>'+_0x4fa88c[_0x13dbb6(0x157)]+'</td>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<td\x20class=\x22py-2\x20px-4\x20text-center\x20font-medium\x22>'+_0x4fa88c[_0x13dbb6(0x93)][_0x13dbb6(0xfe)]+_0x13dbb6(0xf2)+_0x4fa88c['completedBy']['size']+_0x13dbb6(0x12a)+_0x4fa88c[_0x13dbb6(0x93)][_0x13dbb6(0xfe)]+_0x13dbb6(0x1a0))[_0x13dbb6(0xdb)]('');}document[_0x1f46e0(0x1b6)]('search-user-input')[_0x1f46e0(0xa7)](_0x1f46e0(0x165),renderUsersTable),document['getElementById'](_0x1f46e0(0x1c0))['addEventListener'](_0x1f46e0(0x165),()=>{contentCurrentPage=0x1,renderContentTable();}),document[_0x1f46e0(0x1b6)]('content-page')['addEventListener'](_0x1f46e0(0x13c),_0x56746f=>{const _0x3782fe=_0x1f46e0,_0x423fee=_0x56746f[_0x3782fe(0x1a8)]['closest']('.pagination-btn');_0x423fee&&!_0x423fee[_0x3782fe(0x118)]&&(contentCurrentPage=parseInt(_0x423fee[_0x3782fe(0x173)]['page']),renderContentTable());}),document[_0x1f46e0(0x1b6)](_0x1f46e0(0x14e))['addEventListener']('click',()=>{const _0x21dacf=_0x1f46e0;userForm[_0x21dacf(0xbf)](),document[_0x21dacf(0x1b6)](_0x21dacf(0x187))[_0x21dacf(0x1b0)]='',document[_0x21dacf(0x1b6)](_0x21dacf(0x1ba))[_0x21dacf(0xad)]=_0x21dacf(0x1b1),document[_0x21dacf(0x1b6)](_0x21dacf(0x1cd))[_0x21dacf(0xa1)]=!![],userModal['classList'][_0x21dacf(0x19b)]('hidden');}),document['getElementById'](_0x1f46e0(0x1bf))[_0x1f46e0(0xa7)]('click',()=>userModal[_0x1f46e0(0x144)][_0x1f46e0(0x132)](_0x1f46e0(0x163))),userForm['addEventListener'](_0x1f46e0(0xe7),async _0x501421=>{const _0x5d358f=_0x1f46e0;_0x501421['preventDefault']();const _0x139d6b=document['getElementById'](_0x5d358f(0x187))[_0x5d358f(0x1b0)],_0xc4c7a5={'nama':document[_0x5d358f(0x1b6)](_0x5d358f(0x195))[_0x5d358f(0x1b0)],'instansi':document[_0x5d358f(0x1b6)]('user-instansi')['value'],'username':document[_0x5d358f(0x1b6)](_0x5d358f(0x82))[_0x5d358f(0x1b0)],'role':document[_0x5d358f(0x1b6)](_0x5d358f(0x135))[_0x5d358f(0x1b0)]},_0x5e36ea=document[_0x5d358f(0x1b6)](_0x5d358f(0x1cd))[_0x5d358f(0x1b0)];if(_0x5e36ea)_0xc4c7a5[_0x5d358f(0x8f)]=_0x5e36ea;_0x139d6b?await setDoc(doc(db,'users',_0x139d6b),_0xc4c7a5,{'merge':!![]}):await addDoc(collection(db,_0x5d358f(0x1bc)),_0xc4c7a5),await fetchData(),userModal[_0x5d358f(0x144)][_0x5d358f(0x132)](_0x5d358f(0x163));}),document['getElementById'](_0x1f46e0(0x1a6))[_0x1f46e0(0xa7)]('click',()=>{const _0x4b5260=_0x1f46e0;contentForm[_0x4b5260(0xbf)](),document['getElementById'](_0x4b5260(0x16c))['value']='',document[_0x4b5260(0x1b6)](_0x4b5260(0x13e))[_0x4b5260(0xad)]='Tambah\x20Konten\x20Baru',contentModal['classList'][_0x4b5260(0x19b)](_0x4b5260(0x163));}),document[_0x1f46e0(0x1b6)]('cancel-content-modal')[_0x1f46e0(0xa7)](_0x1f46e0(0x13c),()=>contentModal[_0x1f46e0(0x144)]['add'](_0x1f46e0(0x163))),contentForm['addEventListener'](_0x1f46e0(0xe7),async _0x449b56=>{const _0x533f27=_0x1f46e0;_0x449b56[_0x533f27(0x181)]();const _0x1583cf=document['getElementById'](_0x533f27(0x16c))[_0x533f27(0x1b0)],_0x4b04fc={'title':document[_0x533f27(0x1b6)](_0x533f27(0x175))['value'],'url':document[_0x533f27(0x1b6)](_0x533f27(0xf6))['value'],'subject':document['getElementById'](_0x533f27(0x1a9))[_0x533f27(0x1b0)]};_0x1583cf?await setDoc(doc(db,_0x533f27(0x14b),_0x1583cf),_0x4b04fc,{'merge':!![]}):await addDoc(collection(db,_0x533f27(0x14b)),{..._0x4b04fc,'status':'pending'}),await fetchData(),contentModal[_0x533f27(0x144)][_0x533f27(0x132)]('hidden');}),document[_0x1f46e0(0xd8)][_0x1f46e0(0xa7)]('click',async _0x122675=>{const _0x2f6766=_0x1f46e0,_0x3df5ac=_0x122675[_0x2f6766(0x1a8)][_0x2f6766(0xcc)]('button');if(!_0x3df5ac)return;if(_0x3df5ac[_0x2f6766(0xa6)](_0x2f6766(0x16d))){const _0x3d5792=_0x3df5ac[_0x2f6766(0x173)]['id'],_0x3a23df=allUsers[_0x2f6766(0x1bb)](_0x1ca6c5=>_0x1ca6c5['id']===_0x3d5792);document[_0x2f6766(0x1b6)](_0x2f6766(0x187))['value']=_0x3d5792,document[_0x2f6766(0x1b6)]('user-nama')['value']=_0x3a23df[_0x2f6766(0xd2)],document[_0x2f6766(0x1b6)](_0x2f6766(0xb0))['value']=_0x3a23df[_0x2f6766(0xf0)],document[_0x2f6766(0x1b6)]('user-username')[_0x2f6766(0x1b0)]=_0x3a23df[_0x2f6766(0x18d)],document[_0x2f6766(0x1b6)](_0x2f6766(0x1cd))[_0x2f6766(0x1b0)]='',document[_0x2f6766(0x1b6)]('user-password')[_0x2f6766(0xa1)]=![],document[_0x2f6766(0x1b6)](_0x2f6766(0x135))[_0x2f6766(0x1b0)]=_0x3a23df[_0x2f6766(0x141)],document[_0x2f6766(0x1b6)]('user-modal-title')[_0x2f6766(0xad)]=_0x2f6766(0xe2),userModal[_0x2f6766(0x144)][_0x2f6766(0x19b)](_0x2f6766(0x163));}_0x3df5ac['matches'](_0x2f6766(0x1b3))&&showConfirm(_0x2f6766(0xcb),'Yakin\x20ingin\x20menghapus\x20pengguna\x20ini?',async()=>{const _0x9c58ea=_0x2f6766;await deleteDoc(doc(db,_0x9c58ea(0x1bc),_0x3df5ac[_0x9c58ea(0x173)]['id'])),await fetchData();});if(_0x3df5ac['matches'](_0x2f6766(0x178))){const _0x196cbb=_0x3df5ac[_0x2f6766(0x173)]['id'],_0x58fbd4=allContent[_0x2f6766(0x1bb)](_0x2a337d=>_0x2a337d['id']===_0x196cbb);document[_0x2f6766(0x1b6)](_0x2f6766(0x16c))[_0x2f6766(0x1b0)]=_0x196cbb,document[_0x2f6766(0x1b6)]('content-title')[_0x2f6766(0x1b0)]=_0x58fbd4[_0x2f6766(0x157)],document[_0x2f6766(0x1b6)](_0x2f6766(0xf6))[_0x2f6766(0x1b0)]=_0x58fbd4['url'],document[_0x2f6766(0x1b6)]('content-subject')[_0x2f6766(0x1b0)]=_0x58fbd4[_0x2f6766(0xc3)],document[_0x2f6766(0x1b6)]('content-modal-title')[_0x2f6766(0xad)]=_0x2f6766(0x193),contentModal[_0x2f6766(0x144)][_0x2f6766(0x19b)](_0x2f6766(0x163));}_0x3df5ac['matches'](_0x2f6766(0x10b))&&showConfirm(_0x2f6766(0x147),_0x2f6766(0xe8),async()=>{const _0x10231b=_0x2f6766;await deleteDoc(doc(db,_0x10231b(0x14b),_0x3df5ac[_0x10231b(0x173)]['id'])),await fetchData();});const _0x43696e=document[_0x2f6766(0x1b6)]('user-select')[_0x2f6766(0x1b0)];if(_0x43696e){const _0x1d2255=doc(db,_0x2f6766(0x14a),_0x43696e);_0x3df5ac[_0x2f6766(0xa6)](_0x2f6766(0xe9))&&(await setDoc(_0x1d2255,{'contentIds':arrayUnion(_0x3df5ac[_0x2f6766(0x173)][_0x2f6766(0x138)])},{'merge':!![]}),await fetchData()),_0x3df5ac[_0x2f6766(0xa6)](_0x2f6766(0x18c))&&(await updateDoc(_0x1d2255,{'contentIds':arrayRemove(_0x3df5ac[_0x2f6766(0x173)][_0x2f6766(0x138)])}),await fetchData());}}),document['getElementById'](_0x1f46e0(0xde))['addEventListener'](_0x1f46e0(0x16e),_0xe293bc=>{const _0xc5440c=_0x1f46e0,_0x44053e=_0xe293bc[_0xc5440c(0x1a8)][_0xc5440c(0x1b0)];_0x44053e?renderAssignmentLists(_0x44053e):(document[_0xc5440c(0x1b6)](_0xc5440c(0x1af))['innerHTML']='',document[_0xc5440c(0x1b6)]('all-content-list')[_0xc5440c(0xe3)]='');}),document[_0x1f46e0(0x1b6)]('delete-all-content-btn')[_0x1f46e0(0xa7)](_0x1f46e0(0x13c),()=>{const _0x1f9ae4=_0x1f46e0;showConfirm(_0x1f9ae4(0x11f),_0x1f9ae4(0x13a),async()=>{await clearCollection('contents'),await fetchData();});}),document[_0x1f46e0(0x1b6)](_0x1f46e0(0x185))[_0x1f46e0(0xa7)](_0x1f46e0(0x13c),()=>{const _0x2af165=_0x1f46e0;showConfirm(_0x2af165(0x113),_0x2af165(0x168),async()=>{const _0x40433e=_0x2af165,_0x472f51=allUsers[_0x40433e(0x129)](_0x2a6b09=>_0x2a6b09[_0x40433e(0x141)]===_0x40433e(0xa3)),_0x3b0475=allContent[_0x40433e(0xe0)](_0x33e588=>_0x33e588['id']);if(_0x472f51[_0x40433e(0x91)]===0x0){showInfo('Gagal',_0x40433e(0x1b4));return;}if(_0x3b0475['length']===0x0){showInfo(_0x40433e(0x1a1),_0x40433e(0x140));return;}const _0x5bb3a2=[];_0x3b0475[_0x40433e(0x19f)](_0xb289be=>{const _0x252d7d=_0x40433e;_0x5bb3a2[_0x252d7d(0x88)](_0xb289be,_0xb289be,_0xb289be);});for(let _0x1e44c8=_0x5bb3a2['length']-0x1;_0x1e44c8>0x0;_0x1e44c8--){const _0x12f2fd=Math[_0x40433e(0x95)](Math[_0x40433e(0x1a7)]()*(_0x1e44c8+0x1));[_0x5bb3a2[_0x1e44c8],_0x5bb3a2[_0x12f2fd]]=[_0x5bb3a2[_0x12f2fd],_0x5bb3a2[_0x1e44c8]];}const _0x598426=writeBatch(db),_0x49bac7=await getDocs(collection(db,_0x40433e(0x14a)));_0x49bac7[_0x40433e(0x117)]['forEach'](_0x18ca8f=>_0x598426[_0x40433e(0x97)](_0x18ca8f[_0x40433e(0x13f)])),_0x472f51['forEach'](_0x96af29=>{const _0x5d9fac=_0x40433e,_0x442b3d=_0x5bb3a2['splice'](0x0,0xc);if(_0x442b3d[_0x5d9fac(0x91)]>0x0){const _0x20024c=doc(db,_0x5d9fac(0x14a),_0x96af29[_0x5d9fac(0x18d)]);_0x598426[_0x5d9fac(0x134)](_0x20024c,{'contentIds':[...new Set(_0x442b3d)]});}});try{await _0x598426[_0x40433e(0xe6)](),await fetchData(),showInfo('Berhasil',_0x40433e(0x183));}catch(_0xb68907){console[_0x40433e(0x154)](_0x40433e(0x100),_0xb68907),showInfo(_0x40433e(0x92),'Terjadi\x20kesalahan:\x20'+_0xb68907[_0x40433e(0x167)]);}});});function cacheLog(_0x120e65){const _0x3f3c98=_0x1f46e0;cacheLogBox['innerHTML']+=_0x3f3c98(0x114)+_0x120e65,cacheLogBox[_0x3f3c98(0x8e)]=cacheLogBox['scrollHeight'];}const scoreMap={'Lulus\x20Kurasi':0x5,'Kurang\x20Sesuai':0x4,'Perbaikan\x20Minor':0x3,'Perbaikan\x20Mayor':0x2,'Tidak\x20Lulus\x20Kurasi':0x1},resultCategories=[_0x1f46e0(0x102),_0x1f46e0(0xd3),'Perbaikan\x20Minor','Perbaikan\x20Mayor','Tidak\x20Lulus\x20Kurasi',_0x1f46e0(0x84)];function _0x2089(_0x166ca3,_0x427ba1){const _0x548066=_0x5480();return _0x2089=function(_0x2089d8,_0x4b3fef){_0x2089d8=_0x2089d8-0x82;let _0x20cf3b=_0x548066[_0x2089d8];return _0x20cf3b;},_0x2089(_0x166ca3,_0x427ba1);}function getResultFromScore(_0x4ca1b4){const _0x120e78=_0x1f46e0,_0x36f73b=Math[_0x120e78(0x1ab)](_0x4ca1b4);switch(_0x36f73b){case 0x5:return _0x120e78(0x102);case 0x4:return'Kurang\x20Sesuai';case 0x3:return'Perbaikan\x20Minor';case 0x2:return _0x120e78(0x13b);case 0x1:return _0x120e78(0x1ad);default:return _0x120e78(0x84);}}function calculateAverageResult(_0x12d3ee,_0x591a55,_0x2c1400,_0x2e8e0a){const _0x466983=_0x1f46e0,_0x2d2eb7=_0x591a55[_0x466983(0x1b9)](_0x12d3ee['id'])||[];let _0x40c541=[];for(const _0x51dc68 of _0x2d2eb7){const _0x10364b=_0x51dc68+'_'+_0x12d3ee['id'],_0x2ed293=_0x2c1400[_0x466983(0x1b9)](_0x10364b);if(_0x2ed293){const _0x31a7da=(_0x2ed293['answers']?.[_0x466983(0xc8)]?.[_0x466983(0x16a)]||'')[_0x466983(0xff)](),_0x129288=scoreMap[_0x31a7da];_0x129288!==undefined&&_0x40c541['push'](_0x129288);}}if(_0x40c541[_0x466983(0x91)]>0x0){const _0x3d61dd=_0x40c541[_0x466983(0xa9)]((_0x3593ba,_0x4cb173)=>_0x3593ba+_0x4cb173,0x0),_0x129af2=_0x3d61dd/_0x40c541[_0x466983(0x91)];return{'averageResultText':getResultFromScore(_0x129af2),'averageScore':_0x129af2};}return{'averageResultText':_0x466983(0x84),'averageScore':0x0};}async function handleUpdateCache(){const _0x447087=_0x1f46e0,_0x269e8f=document['getElementById'](_0x447087(0x166));_0x269e8f[_0x447087(0x118)]=!![],_0x269e8f[_0x447087(0x19c)](_0x447087(0xa0))['textContent']='Sedang\x20Memproses...',cacheLogBox[_0x447087(0xe3)]=_0x447087(0x189);try{cacheLog(_0x447087(0x12b)+allUsers['length']+_0x447087(0x106)+allContent[_0x447087(0x91)]+_0x447087(0x9f)+allCurations[_0x447087(0x91)]+_0x447087(0x11d)),cacheLog(_0x447087(0x122));const _0x14e5d7=allContent[_0x447087(0x91)],_0x86f767=new Set(allCurations[_0x447087(0xe0)](_0x23b197=>_0x23b197[_0x447087(0x138)]))[_0x447087(0xfe)],_0x598f37=allUsers[_0x447087(0x129)](_0x1b7ca8=>_0x1b7ca8[_0x447087(0x141)]==='Kurator'),_0x2e965b=_0x598f37[_0x447087(0x91)];cacheLog(_0x447087(0xab));const _0x5eb0fa=new Set(allCurations[_0x447087(0xe0)](_0x222b0b=>_0x222b0b[_0x447087(0xbb)]+'_'+_0x222b0b[_0x447087(0x138)])),_0x4a136b=_0x598f37[_0x447087(0x1cb)]((_0x3f683a,_0x18f30a)=>_0x3f683a[_0x447087(0xd2)][_0x447087(0x153)](_0x18f30a['nama']))[_0x447087(0xe0)](_0x296a25=>{const _0x4467a5=_0x447087,_0x33ee2f=allAssignments[_0x296a25[_0x4467a5(0x18d)]]||[],_0x1cc25b=Array(0xc)[_0x4467a5(0x1a4)](_0x4467a5(0xf3));return _0x33ee2f[_0x4467a5(0x19f)]((_0xccd580,_0x2a26cf)=>{const _0x201315=_0x4467a5;_0x2a26cf<0xc&&(_0x1cc25b[_0x2a26cf]=_0x5eb0fa[_0x201315(0xed)](_0x296a25['id']+'_'+_0xccd580)?_0x201315(0xf5):_0x201315(0x103));}),{'curatorName':_0x296a25[_0x4467a5(0xd2)],'tasks':_0x1cc25b};}),_0x2d2101={'totalContent':_0x14e5d7,'curatedContent':_0x86f767,'totalKurator':_0x2e965b,'lastUpdated':serverTimestamp(),'progressTableData':_0x4a136b},_0x9e206f=doc(db,_0x447087(0x9e),_0x447087(0x176));cacheLog(_0x447087(0x151)),await setDoc(_0x9e206f,_0x2d2101),cacheLog(_0x447087(0x184)),cacheLog('\x0aMemulai\x20perhitungan\x20untuk\x20cache\x20analisis...');const _0x44807b=new Map(allContent['map'](_0x552d91=>[_0x552d91['id'],_0x552d91])),_0x1bf738=new Map(allCurations[_0x447087(0xe0)](_0x2f0aab=>[_0x2f0aab['id'],_0x2f0aab])),_0x32a797=new Map(allUsers['map'](_0xb2d9b2=>[_0xb2d9b2[_0x447087(0x18d)],_0xb2d9b2['id']])),_0x523161=new Map();for(const _0x2b2070 in allAssignments){const _0x155504=_0x32a797[_0x447087(0x1b9)](_0x2b2070);_0x155504&&allAssignments[_0x2b2070][_0x447087(0x19f)](_0x1da121=>{const _0x56302a=_0x447087;if(!_0x523161[_0x56302a(0xed)](_0x1da121))_0x523161[_0x56302a(0x134)](_0x1da121,[]);_0x523161[_0x56302a(0x1b9)](_0x1da121)[_0x56302a(0x88)](_0x155504);});}const _0x1e8156=Object[_0x447087(0x101)](resultCategories[_0x447087(0xe0)](_0x371c55=>[_0x371c55,0x0]));_0x44807b['forEach'](_0x4c5723=>{const _0x4bac6e=_0x447087,{averageResultText:_0x29d854}=calculateAverageResult(_0x4c5723,_0x523161,_0x1bf738,_0x32a797);_0x1e8156[_0x4bac6e(0x108)](_0x29d854)&&_0x1e8156[_0x29d854]++;}),cacheLog(_0x447087(0x19a));const _0x58287c={'stats':_0x1e8156,'totalContent':_0x14e5d7,'lastUpdated':serverTimestamp()},_0x100519=doc(db,_0x447087(0x9e),_0x447087(0x9d));cacheLog('Menyimpan\x20data\x20ke\x20`dashboard_cache/analysis_summary`...'),await setDoc(_0x100519,_0x58287c),cacheLog(_0x447087(0xac)),cacheLog(_0x447087(0x124));const _0x16a2ce=new Map(allUsers[_0x447087(0xe0)](_0x26e19d=>[_0x26e19d['id'],_0x26e19d])),_0x6c762b=allContent['map'](_0x298a62=>{const _0xb57fa4=_0x447087,{averageResultText:_0x1b92be,averageScore:_0x175d61}=calculateAverageResult(_0x298a62,_0x523161,_0x1bf738,_0x32a797),_0x1b45e3=_0x523161[_0xb57fa4(0x1b9)](_0x298a62['id'])||[],_0x5d95ee=[];for(const _0x2b02d8 of _0x1b45e3){const _0x162585=_0x2b02d8+'_'+_0x298a62['id'],_0x139bd8=_0x1bf738[_0xb57fa4(0x1b9)](_0x162585),_0x1469f6=_0x16a2ce[_0xb57fa4(0x1b9)](_0x2b02d8);if(_0x139bd8&&_0x1469f6){const _0x43be16=_0x139bd8['answers']?.['D2_Keputusan_Final']||{};_0x5d95ee[_0xb57fa4(0x88)]({'curatorId':_0x2b02d8,'curatorName':_0x1469f6['nama'],'finalDecision':_0x43be16[_0xb57fa4(0x16a)]||_0xb57fa4(0x84),'photoUrl':_0x43be16['photoUrl']||''});}}return{'id':_0x298a62['id'],'title':_0x298a62[_0xb57fa4(0x157)],'subject':_0x298a62[_0xb57fa4(0xc3)],'url':_0x298a62[_0xb57fa4(0xdd)],'averageResultText':_0x1b92be,'averageScore':_0x175d61,'curatorCount':_0x1b45e3[_0xb57fa4(0x91)],'curations':_0x5d95ee};});cacheLog(_0x447087(0x152));const _0x10d12={'contents':_0x6c762b,'lastUpdated':serverTimestamp()},_0x2e5d32=doc(db,_0x447087(0x9e),_0x447087(0x104));cacheLog(_0x447087(0x1aa)),await setDoc(_0x2e5d32,_0x10d12),cacheLog(_0x447087(0xcf)),cacheLog(_0x447087(0xb6));}catch(_0x2c61d6){cacheLog('\x0a❌\x20TERJADI\x20KESALAHAN:\x20'+_0x2c61d6[_0x447087(0x167)]),console[_0x447087(0x154)]('Gagal\x20memperbarui\x20cache:',_0x2c61d6);}finally{_0x269e8f[_0x447087(0x118)]=![],_0x269e8f[_0x447087(0x19c)](_0x447087(0xa0))['textContent']=_0x447087(0x1c4);}}document['getElementById'](_0x1f46e0(0x166))[_0x1f46e0(0xa7)](_0x1f46e0(0x13c),handleUpdateCache);function log(_0x4c3fd3){const _0x10c09e=_0x1f46e0;logBox[_0x10c09e(0xe3)]+=_0x10c09e(0x114)+_0x4c3fd3,logBox['scrollTop']=logBox[_0x10c09e(0x1c5)];}async function clearCollection(_0x38d8ef){const _0x37fc51=_0x1f46e0;log(_0x37fc51(0x10d)+_0x38d8ef+'\x27...');const _0x13dcc3=await getDocs(collection(db,_0x38d8ef));if(_0x13dcc3[_0x37fc51(0xf3)]){log(_0x37fc51(0xb5)+_0x38d8ef+'\x27\x20sudah\x20kosong.');return;}const _0x80060b=writeBatch(db);_0x13dcc3[_0x37fc51(0x117)]['forEach'](_0x2923ab=>_0x80060b[_0x37fc51(0x97)](_0x2923ab[_0x37fc51(0x13f)])),await _0x80060b[_0x37fc51(0xe6)](),log(_0x37fc51(0x174)+_0x38d8ef+_0x37fc51(0xf9));}document[_0x1f46e0(0x1b6)](_0x1f46e0(0xc0))[_0x1f46e0(0xa7)](_0x1f46e0(0x13c),()=>{const _0x2d01e9=_0x1f46e0,_0x4ae22a=[{'title':_0x2d01e9(0x128),'url':'https://www.youtube.com/watch?v=example','subject':'Matematika'}],_0x5c4129=XLSX['utils'][_0x2d01e9(0x121)](_0x4ae22a),_0x5ddfca=XLSX[_0x2d01e9(0x160)]['book_new']();XLSX[_0x2d01e9(0x160)][_0x2d01e9(0x1c1)](_0x5ddfca,_0x5c4129,_0x2d01e9(0x13d)),XLSX[_0x2d01e9(0x89)](_0x5ddfca,_0x2d01e9(0x161));}),document[_0x1f46e0(0x1b6)](_0x1f46e0(0xb7))[_0x1f46e0(0xa7)](_0x1f46e0(0x13c),()=>document['getElementById'](_0x1f46e0(0x15d))[_0x1f46e0(0x13c)]()),document['getElementById'](_0x1f46e0(0x15d))[_0x1f46e0(0xa7)](_0x1f46e0(0x16e),_0x2473eb=>{const _0x440dda=_0x1f46e0,_0x9482f9=_0x2473eb[_0x440dda(0x1a8)][_0x440dda(0x197)][0x0];if(!_0x9482f9)return;const _0x21e291=new FileReader();_0x21e291[_0x440dda(0x1b5)]=async _0xce51c=>{const _0x54417d=_0x440dda;log(_0x54417d(0xc4)+_0x9482f9[_0x54417d(0x1ca)]+_0x54417d(0xaf));try{const _0x3aaa5b=new Uint8Array(_0xce51c[_0x54417d(0x1a8)][_0x54417d(0xbe)]),_0x5ed08b=XLSX[_0x54417d(0x149)](_0x3aaa5b,{'type':_0x54417d(0x17a)}),_0xfbeaa1=_0x5ed08b[_0x54417d(0x11b)][0x0],_0x370172=_0x5ed08b[_0x54417d(0x170)][_0xfbeaa1],_0x57e25a=XLSX['utils'][_0x54417d(0x18e)](_0x370172);if(_0x57e25a[_0x54417d(0x91)]===0x0){log('❌\x20Gagal:\x20File\x20Excel\x20kosong\x20atau\x20format\x20tidak\x20didukung.');return;}const _0x47aa5d=_0x57e25a[0x0];if(!('title'in _0x47aa5d&&'url'in _0x47aa5d&&_0x54417d(0xc3)in _0x47aa5d)){log(_0x54417d(0xb1));return;}log(_0x54417d(0x1c9)+_0x57e25a[_0x54417d(0x91)]+'\x20baris\x20data.\x20Memulai\x20proses\x20unggah...');const _0x3c3794=writeBatch(db);_0x57e25a[_0x54417d(0x19f)](_0x54508c=>{const _0x4d96e8=_0x54417d;if(_0x54508c[_0x4d96e8(0x157)]&&_0x54508c[_0x4d96e8(0xdd)]){const _0x270a12=doc(collection(db,_0x4d96e8(0x14b)));_0x3c3794['set'](_0x270a12,{'title':String(_0x54508c['title']),'url':String(_0x54508c[_0x4d96e8(0xdd)]),'subject':String(_0x54508c[_0x4d96e8(0xc3)]||_0x4d96e8(0xfa)),'status':'pending'});}}),await _0x3c3794['commit'](),log(_0x54417d(0x17b)+_0x57e25a[_0x54417d(0x91)]+_0x54417d(0x196)),await fetchData(),_0x2473eb['target'][_0x54417d(0x1b0)]='';}catch(_0x10aa8d){log(_0x54417d(0xda)+_0x10aa8d[_0x54417d(0x167)]),console[_0x54417d(0x154)](_0x54417d(0x18a),_0x10aa8d);}},_0x21e291['readAsArrayBuffer'](_0x9482f9);}),document['getElementById']('resetButton')['addEventListener'](_0x1f46e0(0x13c),()=>{const _0x2a8430=_0x1f46e0;showConfirm(_0x2a8430(0x8a),_0x2a8430(0x1c7),async()=>{const _0x3369ed=_0x2a8430,_0x40ad01=document[_0x3369ed(0x1b6)](_0x3369ed(0x18f));_0x40ad01[_0x3369ed(0x118)]=!![],_0x40ad01[_0x3369ed(0x119)]=_0x3369ed(0xb8),logBox[_0x3369ed(0xe3)]='Memulai\x20proses\x20reset...';try{await clearCollection('users'),await clearCollection(_0x3369ed(0x14b)),await clearCollection('assignments'),await clearCollection(_0x3369ed(0xd5)),log(_0x3369ed(0x116));const _0x1a37a1=[{'nama':_0x3369ed(0x8d),'instansi':_0x3369ed(0xce),'password':_0x3369ed(0xb3),'username':_0x3369ed(0x10e),'role':_0x3369ed(0xa3)},{'nama':'Bintang\x20Adhi\x20Permana','instansi':_0x3369ed(0x11e),'password':_0x3369ed(0x158),'username':_0x3369ed(0xa4),'role':_0x3369ed(0xa3)},{'nama':_0x3369ed(0xb4),'instansi':'Instansi\x20Supervisor','password':_0x3369ed(0xb3),'username':_0x3369ed(0x11a),'role':_0x3369ed(0x133)},{'nama':'Admin','instansi':_0x3369ed(0x15e),'password':'Admin1234','username':_0x3369ed(0x199),'role':_0x3369ed(0x199)}],_0x1fac82=writeBatch(db);_0x1a37a1[_0x3369ed(0x19f)](_0x15ef57=>{const _0x564f32=_0x3369ed,_0x1e7bec=doc(collection(db,_0x564f32(0x1bc)));_0x1fac82['set'](_0x1e7bec,_0x15ef57);}),await _0x1fac82['commit'](),log(_0x3369ed(0x172)),await fetchData(),log(_0x3369ed(0xa5));}catch(_0x4fde70){log(_0x3369ed(0x10c)+_0x4fde70[_0x3369ed(0x167)]),console[_0x3369ed(0x154)](_0x4fde70);}finally{_0x40ad01[_0x3369ed(0x118)]=![],_0x40ad01[_0x3369ed(0xe3)]=_0x3369ed(0xf8);}});}),document[_0x1f46e0(0x1b6)](_0x1f46e0(0x1cf))[_0x1f46e0(0xa7)](_0x1f46e0(0x13c),async()=>{const _0x3d2f95=_0x1f46e0;log(_0x3d2f95(0xf7));const _0x3fbf56={},_0x20b95e=[_0x3d2f95(0x1bc),_0x3d2f95(0x14b),_0x3d2f95(0x14a),_0x3d2f95(0xd5)];try{for(const _0x27e584 of _0x20b95e){log(_0x3d2f95(0xc7)+_0x27e584+_0x3d2f95(0x143));const _0x37799e=_0x27e584===_0x3d2f95(0x1bc)?allUsers:_0x27e584===_0x3d2f95(0x14b)?allContent:_0x27e584==='curations'?allCurations:[];_0x27e584===_0x3d2f95(0x14a)?_0x3fbf56[_0x27e584]=Object[_0x3d2f95(0x8b)](allAssignments)[_0x3d2f95(0xe0)](([_0x5d8c1c,_0x48a9fc])=>({'id':_0x5d8c1c,'contentIds':_0x48a9fc})):_0x3fbf56[_0x27e584]=_0x37799e,log(_0x3d2f95(0x174)+_0x27e584+_0x3d2f95(0x192));}const _0x32c4b9=JSON[_0x3d2f95(0xeb)](_0x3fbf56,null,0x2),_0x3b5051=new Blob([_0x32c4b9],{'type':_0x3d2f95(0x17c)}),_0x4f21a9=URL[_0x3d2f95(0xdf)](_0x3b5051),_0x124a43=document[_0x3d2f95(0x98)]('a');_0x124a43[_0x3d2f95(0x150)]=_0x4f21a9;const _0x1cbc90=new Date()[_0x3d2f95(0x1c8)]()[_0x3d2f95(0x188)](0x0,0xa);_0x124a43[_0x3d2f95(0xf4)]=_0x3d2f95(0xea)+_0x1cbc90+_0x3d2f95(0xa2),document[_0x3d2f95(0xd8)][_0x3d2f95(0x14f)](_0x124a43),_0x124a43[_0x3d2f95(0x13c)](),document[_0x3d2f95(0xd8)]['removeChild'](_0x124a43),URL[_0x3d2f95(0x1ac)](_0x4f21a9),log(_0x3d2f95(0x17d));}catch(_0x1709ca){log(_0x3d2f95(0x15f)+_0x1709ca[_0x3d2f95(0x167)]),console[_0x3d2f95(0x154)](_0x3d2f95(0xee),_0x1709ca);}}),document[_0x1f46e0(0x1b6)]('restoreButtonTrigger')['addEventListener'](_0x1f46e0(0x13c),()=>document['getElementById']('restoreFileInput')['click']()),document[_0x1f46e0(0x1b6)](_0x1f46e0(0x110))[_0x1f46e0(0xa7)](_0x1f46e0(0x16e),_0x1941b7=>{const _0x30f783=_0x1f46e0,_0x713110=_0x1941b7[_0x30f783(0x1a8)][_0x30f783(0x197)][0x0];if(_0x713110&&_0x713110[_0x30f783(0xd0)]===_0x30f783(0x17c))handleRestore(_0x713110);else _0x713110&&log('❌\x20Gagal:\x20Harap\x20pilih\x20file\x20backup\x20JSON\x20yang\x20valid.');_0x1941b7['target']['value']='';});async function handleRestore(_0x22189e){const _0x410285=_0x1f46e0;showConfirm(_0x410285(0x112),_0x410285(0x111),async()=>{const _0x31ec34=_0x410285;log(_0x31ec34(0x14c));const _0x35a979=new FileReader();_0x35a979['onload']=async _0x220a0c=>{const _0x29a0a6=_0x31ec34;try{const _0x9ed3d4=JSON[_0x29a0a6(0xe4)](_0x220a0c['target'][_0x29a0a6(0xbe)]),_0x5c4617=[_0x29a0a6(0x1bc),_0x29a0a6(0x14b),'assignments',_0x29a0a6(0xd5)],_0x3dc30d=_0x5c4617['filter'](_0x551d1e=>!_0x9ed3d4[_0x29a0a6(0x108)](_0x551d1e)||!Array[_0x29a0a6(0x16f)](_0x9ed3d4[_0x551d1e]));if(_0x3dc30d[_0x29a0a6(0x91)]>0x0){log(_0x29a0a6(0x86)+_0x3dc30d[_0x29a0a6(0xdb)](',\x20'));return;}log(_0x29a0a6(0x1cc));for(const _0x3440b6 of _0x5c4617){await clearCollection(_0x3440b6);}log(_0x29a0a6(0xb2));for(const _0x435ced of _0x5c4617){log('Me-restore\x20koleksi\x20\x27'+_0x435ced+_0x29a0a6(0x143));const _0x3c8307=_0x9ed3d4[_0x435ced];if(_0x3c8307[_0x29a0a6(0x91)]===0x0){log(_0x29a0a6(0xb5)+_0x435ced+'\x27\x20kosong,\x20dilewati.');continue;}const _0x12ca32=writeBatch(db);_0x3c8307[_0x29a0a6(0x19f)](_0x1db54e=>{const _0xb8b297=_0x29a0a6,_0x115514=_0x1db54e['id'],_0x2434af={..._0x1db54e};delete _0x2434af['id'];const _0x55f186=doc(db,_0x435ced,_0x115514);_0x12ca32[_0xb8b297(0x134)](_0x55f186,_0x2434af);}),await _0x12ca32['commit'](),log('✅\x20Koleksi\x20\x27'+_0x435ced+'\x27\x20berhasil\x20di-restore.');}await fetchData(),log('\x0a🎉\x20RESTORE\x20BERHASIL!');}catch(_0x1b0046){log(_0x29a0a6(0x186)+_0x1b0046[_0x29a0a6(0x167)]),console[_0x29a0a6(0x154)](_0x29a0a6(0x146),_0x1b0046);}},_0x35a979[_0x31ec34(0x190)](_0x22189e);});}

    </script>
</body>
</html>
